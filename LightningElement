  'Requesting App Portfolio' => 'Requesting_App_Portfolio__c',
    'Requesting App Domain'    => 'Requesting_App_Doamin__c'


if(fieldApiName == 'Requesting_App_Portfolio__c'){
                                          fieldApiName= 'Requesting_App_Portfolio__r.Name';
                                      }else if(fieldApiName == 'Requesting_App_Doamin__c'){
                                        fieldApiName= 'Requesting_App_Doamin__r.Name'; 
                                      }

 if (fieldApiNameString.contains('Requesting App Portfolio')) {
    		query = 'SELECT Requesting_App_Portfolio__r.Name, COUNT(Id) ' +
            'FROM AWP_Waiver_Relationship__c ' + condition +
            ' GROUP BY Requesting_App_Portfolio__r.Name';
            system.debug('query '+query);
                results.put('Requesting App Portfolio', Database.query(query));
            }

&& field != 'Requesting App Portfolio'

 if(fieldApiNameString.contains('Requesting App Portfolio')){
             List<PortfolioItem> lstportfolio = getRequestingAppDomainPortfolio(fieldApiName);
            system.debug('lstportfolio 1278 '+ lstportfolio);
              fieldUniqueMap.put('requestingAppPort', lstportfolio);
          }



@AuraEnabled(cacheable=true)
    public static List<PortfolioItem> getRequestingAppDomainPortfolio(list<string> filterNames) {
        //String whereClause = buildWhereConditionForNames(filterNames);
       // system.debug('whereClause '+whereClause);
         string query = 'SELECT Requesting_App_Portfolio__r.Name portfolioName, Requesting_App_Doamin__r.Name  domainName,COUNT(Id) recordCount FROM AWP_Waiver_Relationship__c '
             		 +
                    ' GROUP BY  Requesting_App_Portfolio__r.Name, Requesting_App_Doamin__r.Name ORDER BY Requesting_App_Portfolio__r.Name ' ;
           system.debug('query 1665 '+query);
        List<AggregateResult> results = Database.query(query);
        system.debug('results 1667 '+results);
        Map<String, String> fieldMap = getStagePicklistValues();
		system.debug('results 1667 '+fieldMap);
        // Step 2: Group by Portfolio
        Map<String, PortfolioItem> portfolioMap = new Map<String, PortfolioItem>();

        for (AggregateResult ar : results) {
            system.debug('ar '+ar);
            String portfolioName = (String)ar.get('portfolioName');
            String domainName = (String)ar.get('domainName');
            Integer count = (Integer)ar.get('recordCount');
			system.debug('portfolioName 1688 '+portfolioName+' portfolioName '+portfolioName);
            if (String.isBlank(portfolioName)) {
                portfolioName = 'No Data';
            }
            if (String.isBlank(domainName)) {
                domainName = 'No Data';
            }
			system.debug('portfolioName '+portfolioName+' portfolioName '+portfolioName);
            // Create portfolio if missing
            if (!portfolioMap.containsKey(portfolioName)) {
                PortfolioItem p = new PortfolioItem();
                p.label = portfolioName + ' (0)'; // Will update later with total
                p.count = 0;
                p.domains = new List<DomainItem>();
                portfolioMap.put(portfolioName, p);
            }

            // Add domain to portfolio
            DomainItem d = new DomainItem();
            d.label = domainName + ' (' + count + ')';
            d.count = count;
            portfolioMap.get(portfolioName).domains.add(d);

            // Increase portfolio count
            portfolioMap.get(portfolioName).count += count;
        }

        // Step 3: Update portfolio labels with correct total
        for (PortfolioItem p : portfolioMap.values()) {
            p.label = p.label.substring(0, p.label.lastIndexOf('(')).trim() + ' (' + p.count + ')';
        }
			system.debug(' 1719 '+portfolioMap);
        return new List<PortfolioItem>(portfolioMap.values());
    }
