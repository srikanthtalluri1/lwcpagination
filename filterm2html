<template>
    <lightning-card class={filterCardClass}>
        <lightning-layout multiple-rows="true" class="slds-color__background_gray-2">
            <template if:true={showFilter}>
                <lightning-layout-item padding="around-small" size="12">
                    <lightning-button-icon-stateful icon-name="utility:filterList" selected={showFilter} size="medium"
                        onclick={handleActions} variant="border-filled" data-action="showfiltertoggle">
                    </lightning-button-icon-stateful>
                    <div class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-1 slds-p-top--x-small">
                            <div class="slds-grid slds-wrap">
                                <lightning-input class="slds-col slds-size_1-of-1" name="search" label="Search"
                                    type="search" onchange={handleReset} onkeyup={handleSearch} value={searchKey}>
                                </lightning-input>
                                <div style="margin-top: 10px;"></div>
                                <p class="slds-col slds-size_1-of-1">Filter by:</p>
                                <lightning-combobox class="slds-col slds-size_1-of-1" title="Waivers List"
                                    value={selectedWaiver} options={waiverOptions} onchange={handleWaiverChange}>
                                </lightning-combobox>
                                <c-custom-multi-pick-list class="slds-col slds-size_1-of-1" label=""
                                    required={valueFalse} showpills={valueFalse} role="cm-picklist"
                                    onselectedvalues={handleActions}></c-custom-multi-pick-list>
                            </div>
                        </div>
                    </div>
                    <div if:true={showFilterValues} class="slds-card slds-p-top--medium" key={filteredFieldValue.id}
                        for:each={filteredFieldValues} for:item="filteredFieldValue">
                        <div class="slds-grid slds-align--spread slds-wrap">
                            <div class="slds-col slds-text-title_bold">{filteredFieldValue.filterField}</div>
                            <lightning-button-icon class="slds-col slds-text-align--right"
                                icon-name={filteredFieldValue.icon} size="small" variant="bare" onclick={handleActions}
                                data-action="filterbyexpand" data-index={filteredFieldValue.id}></lightning-button-icon>
                        </div>
                        {filteredFieldValue.uniqueKey}
                        <lightning-checkbox-group if:true={filteredFieldValue.showValues} class="slds-p-top--medium"
                            name="filterValue" options={filteredFieldValue.filteredFieldValue}
                            data-action="selectedfiltervalue" data-index={filteredFieldValue.id}
                            onchange={handleActions} value={filteredFieldValue.selectedValue}
                            key={filteredFieldValue.uniqueKey}>
                        </lightning-checkbox-group>
                    </div>
                    <div class="slds-grid slds-wrap slds-grid--align-end slds-var-p-top_x-large">
                        <div class="slds-col">
                            <lightning-button label="Reset" variant="neutral" data-action="resetfilter"
                                onclick={handleActions}></lightning-button>
                        </div>
                        <div class="slds-col slds-var-p-left_small">
                            <lightning-button label="Apply" variant="brand" data-action="applyfilter"
                                onclick={handleActions}></lightning-button>
                        </div>
                    </div>
                    <template if:true={isLoadingFilter}>
                        <lightning-spinner alternative-text="Loading"></lightning-spinner>
                    </template>
                </lightning-layout-item>
            </template>

        </lightning-layout>

        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading"></lightning-spinner>
        </template>

        
        
    </lightning-card>
    

    <template if:false={showFilter}>
        <!-- <div class="filter-container slds-is-fixed"> -->
        <lightning-button-icon-stateful class="filter-button slds-is-fixed" icon-name="utility:filterList"
            selected={showFilter} size="medium" onclick={handleActions} variant="border-filled"
            data-action="showfiltertoggle"></lightning-button-icon-stateful>
        <!-- </div> -->
    </template>

</template>
