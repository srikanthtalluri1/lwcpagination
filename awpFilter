<!-- sldsValidatorIgnore -->
<template>
  <lightning-card title="Waivers List View" icon-name="custom:custom63">
    <lightning-layout multiple-rows="true">
      <!-- <lightning-layout-item padding="around-small" size="12">
        <div class="slds-grid slds-wrap">
          <div class="slds-col slds-size_2-of-12">
            <div class="slds-grid slds-wrap">
              <p class="slds-col slds-size_1-of-1">Filter by:</p>
              <lightning-combobox class="slds-col slds-size_1-of-1" title="Waivers List" value={selectedWaiver}
                options={waiverOptions} onchange={handleWaiverChange}></lightning-combobox>
              <c-multi-select-picklist class="slds-col slds-size_1-of-1" values={filterOptions.options}
                show-selection="false" onselectedvalues={handleActions}></c-multi-select-picklist>
              <lightning-input class="slds-col slds-size_1-of-1" name="search" label="Search" type="search"
                onchange={handleReset} onkeyup={handleSearch}></lightning-input>
            </div>
          </div>
          <div class="slds-col slds-size_3-of-12 slds-p-left_small">
          </div>
          <div class="slds-col slds-size_7-of-12">
            <div class="slds-grid slds-wrap slds-grid--align-end">
              <div class="slds-col slds-var-p-top_x-large" style="padding-top: 20px">
                <lightning-button-group>
                  <lightning-button label="New Waiver" data-action="newwaiver"
                    onclick={handleActions}></lightning-button>
                  <lightning-button label="Home" data-action="home" onclick={handleActions}></lightning-button>
                  <lightning-button label="Contact Us" data-action="contactus"
                    onclick={handleActions}></lightning-button>
                  <lightning-button label="FAQ" data-action="faq" onclick={handleActions}></lightning-button>
                  <lightning-button label="Help" data-action="help" onclick={handleActions}></lightning-button>
                </lightning-button-group>
              </div>
            </div>
          </div>
        </div>
      </lightning-layout-item> -->

      <!-- <template if:true={showFilter}> -->
      <lightning-layout-item padding="around-small" size="2">
        <div class="slds-grid slds-wrap">
          <div class="slds-col slds-size_1-of-1">
            <div class="slds-grid slds-wrap">
              <p class="slds-col slds-size_1-of-1">Filter by:</p>
              <lightning-combobox class="slds-col slds-size_1-of-1" title="Waivers List" value={selectedWaiver}
                options={waiverOptions} onchange={handleWaiverChange}></lightning-combobox>
              <c-multi-select-picklist class="slds-col slds-size_1-of-1" values={filterOptions.options}
                show-selection="false" onselectedvalues={handleActions}></c-multi-select-picklist>
              <lightning-input class="slds-col slds-size_1-of-1" name="search" label="Search" type="search"
                onchange={handleReset} onkeyup={handleSearch}></lightning-input>
            </div>
          </div>
        </div>
        <div if:true={showFilterValues} class="slds-card slds-p-top--medium" key={filteredFieldValue.id}
          for:each={filteredFieldValues} for:item="filteredFieldValue">
          <div class="slds-grid slds-align--spread slds-wrap">
            <div class="slds-col slds-text-title_bold">{filteredFieldValue.filterField}</div>
            <lightning-button-icon class="slds-col slds-text-align--right" icon-name={filteredFieldValue.icon}
              size="small" variant="bare" onclick={handleActions} data-action="filterbyexpand"
              data-index={filteredFieldValue.id}></lightning-button-icon>
          </div>
          <lightning-checkbox-group if:true={filteredFieldValue.showValues} class="slds-p-top--medium"
            name="filterValue" options={filteredFieldValue.filteredFieldValue} data-action="selectedfiltervalue"
            data-index={filteredFieldValue.id} onchange={handleActions} value={filteredFieldValue.selectedValue}>
          </lightning-checkbox-group>
        </div>
        <div class="slds-grid slds-wrap slds-grid--align-end slds-var-p-top_x-large">
          <div class="slds-col">
            <lightning-button label="Reset" variant="neutral" data-action="resetfilter"
              onclick={handleActions}></lightning-button>
          </div>
          <div class="slds-col slds-var-p-left_small">
            <lightning-button label="Apply" variant="brand" data-action="applyfilter"
              onclick={handleActions}></lightning-button>
          </div>
        </div>
        <template if:true={isLoadingFilter}>
          <lightning-spinner alternative-text="Loading"></lightning-spinner>
        </template>
      </lightning-layout-item>
      <!-- </template> -->

      <lightning-layout-item padding="around-small" size={tableSize}>
        <div>
          <c-custom-datatable-data-type-provider key-field="Id" data={records} columns={columns} hide-checkbox-column
            show-row-number-column="true" sorted-by={sortedBy} sorted-direction={sortedDirection} onsort={handleSort}
            row-number-offset={rowNumberOffset} onrowaction={handleActions} oncustomtext={handleActions}>
          </c-custom-datatable-data-type-provider>
          <template if:true={noRecordsFound}> No records to display </template>
        </div>
        <div class="slds-grid slds-wrap slds-grid--align-spread slds-var-p-top_xx-large">
          <div class="slds-col">
            <!-- <lightning-combobox label="Page Size" value={currentPageSize} options={pageSizeOptions}
              onchange={handlePageSize}></lightning-combobox> -->
          </div>
          <div class="slds-col slds-var-p-top_xx-large">
            <lightning-button-group>
              <lightning-button label="" variant="base" icon-name="utility:jump_to_left" onclick={handleFirst}
                disabled={isFirstPage}></lightning-button>
              <lightning-button label="" variant="base" icon-name="utility:left" onclick={handlePrevious}
                disabled={isFirstPage}></lightning-button>
            </lightning-button-group>
            <span class="slds-m-horizontal_small">
              {currentPage}/{totalPages}
            </span>
            <lightning-button-group>
              <lightning-button label="" variant="base" icon-name="utility:right" icon-position="right"
                onclick={handleNext} disabled={isLastPage}></lightning-button>
              <lightning-button label="" variant="base" icon-name="utility:jump_to_right" icon-position="right"
                onclick={handleLast} disabled={isLastPage}></lightning-button>
            </lightning-button-group>
          </div>
        </div>
      </lightning-layout-item>

      <template if:true={showRecord}>
        <lightning-layout-item padding="around-small" size="8">
          <c-waivers-record-page record-id={recordId}
            object-api-name="AWP_Architecture_Waiver_Form__c"></c-waivers-record-page>
          <div class="slds-m-top_x-large">
            <lightning-button variant="brand" label="Close" data-action="close"
              onclick={handleActions}></lightning-button>
          </div>
        </lightning-layout-item>
      </template>
    </lightning-layout>
    <template if:true={isLoading}>
      <lightning-spinner alternative-text="Loading"></lightning-spinner>
    </template>
  </lightning-card>
</template>
